<div data-ng-controller="_mycloud_mydevices" class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <button class="btn btn-primary" style="float:right; margin:10px 0" title="Registrar nuevo dispositivo"><i class="glyphicon glyphicon-plus"></i> Nuevo Dispositivo</button>
        </div>
    </div>
    <table class="table table-striped table-hover" data-ng-if="Devices && Devices.length > 0">
        <tr>
            <th>ID</th>
            <th>Nombre de Dipositivo</th>
            <th style="text-align: center">API KEY</th>
            <th></th>
        </tr>
        <tr id="tr_device_{{device.device_id}}" data-ng-repeat="device in Devices">
            <td class="td-device-info" style="vertical-align: middle">{{device.device_id}}</td>
            <td class="td-device-info" colspan="{{device.deviceBeingEdited?3:1}}">
                <i class="glyphicon glyphicon-remove pull-right pvcloud-device-edit" data-ng-show="device.deviceBeingEdited" data-ng-click="EditDevice_Cancel(device)" title="Cancelar Edición"></i>
                <div class="pvcloud-edit-toolbar panel panel-default pull-right" data-ng-show="device.deviceBeingEdited">
                    <div class="panel-content">
                        <i class="glyphicon glyphicon-refresh pvcloud-device-edit" style="color:organge" data-ng-click="EditDevice_NewAPIKey(device)" title="Haga clic para generar un nuevo API KEY"  style="color:maroon"></i>&nbsp;
                        <i class="glyphicon glyphicon-floppy-save pvcloud-device-edit" style="color:green" data-ng-click="EditDevice_Save(device)"  title="Guardar Cambios"></i>&nbsp;
                        <i class="glyphicon glyphicon-floppy-remove pvcloud-device-edit" style="color:red" data-ng-click="EditDevice_Delete(device)" title="Desechar Cambios"></i>
                    </div>
                </div>
                <span data-ng-show="!device.deviceBeingEdited">{{device.device_nickname}}</span>
                <span data-ng-show="!device.deviceBeingEdited" class="badge success" title="Data records in pvCloud">{{device.device_id + 8}}</span>
                <br data-ng-show="!device.deviceBeingEdited">
                <small data-ng-show="!device.deviceBeingEdited" class="col-sm-12 text-muted" style="color:gray; margin:0; padding:0">{{device.device_description}}</small>

                <div data-ng-show="device.deviceBeingEdited">
                    <table style="width:60%" class="pvcloud-device-edit-form">
                        <tr>
                            <td style="text-align: right">Nombre:</td>
                            <td><input type="text" data-ng-model="device.device_nickname_edited" style="width:100%" /></td>
                        </tr>
                        <tr>
                            <td style="text-align: right">Descripción:</td>
                            <td>
                                <textarea data-ng-model="device.device_description_edited" style="width:100%" rows="2"></textarea>

                        </tr>
                        <tr>
                            <td style="text-align: right">API KEY:</td>
                            <td><code>{{device.api_key_edited}}</code></td>
                        </tr>                        
                    </table>

                </div>



            </td>
            <td data-ng-show="!device.deviceBeingEdited" class="td-device-info" style="text-align: center">
                <code>{{device.api_key}}</code> 
            </td>
            <td data-ng-show="!device.deviceBeingEdited" class="td-device-info" style="font-size: 2em">
                <i class="glyphicon glyphicon-pencil pvcloud-device-edit" data-ng-click="EditDevice(device)" data-ng-show="!device.deviceBeingEdited"></i>
            </td>
        </tr>
    </table>
    <div data-ng-if="!Devices || Devices.length === 0">You have no devices registered</div>
</div>